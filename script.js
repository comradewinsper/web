let isDragging=!1,currentPosition=50;function setPosition(e){const t=document.getElementById("sliderHandle"),n=document.getElementById("sliderLine"),i=document.getElementById("beforeImage");e=Math.max(0,Math.min(100,e)),currentPosition=e;const o=e+"%";t&&(t.style.left=o),n&&(n.style.left=o),i&&(i.style.clipPath=`inset(0 ${100-e}% 0 0)`)}function initializeBeforeAfterSlider(){isDragging=!1,currentPosition=50;const e=document.getElementById("sliderContainer"),t=document.getElementById("sliderHandle"),n=document.getElementById("sliderLine"),i=document.getElementById("beforeImage");function o(t){const n=e.getBoundingClientRect();return((t.clientX||t.touches&&t.touches[0].clientX)-n.left)/n.width*100}e&&t&&n&&i?(t.addEventListener("mousedown",(function(e){isDragging=!0,e.preventDefault()})),e.addEventListener("mousedown",(function(t){if(t.target===e||t.target===i||t.target.classList.contains("image")){setPosition(o(t))}})),document.addEventListener("mousemove",(function(e){if(isDragging){setPosition(o(e))}})),document.addEventListener("mouseup",(function(){isDragging=!1})),t.addEventListener("touchstart",(function(e){isDragging=!0,e.preventDefault()}),{passive:!1}),e.addEventListener("touchstart",(function(t){if(t.target===e||t.target===i||t.target.classList.contains("image")){setPosition(o(t))}}),{passive:!1}),document.addEventListener("touchmove",(function(e){if(isDragging){e.preventDefault();setPosition(o(e))}}),{passive:!1}),document.addEventListener("touchend",(function(){isDragging=!1})),document.addEventListener("keydown",(function(e){"ArrowLeft"===e.key?setPosition(currentPosition-5):"ArrowRight"===e.key&&setPosition(currentPosition+5)})),setPosition(50)):console.log("Slider elements not found. Skipping init.")}document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("main-content"),t=document.getElementById("project-pages"),n=document.getElementById("mobile-menu"),i=document.getElementById("mobile-menu-button"),o=document.querySelectorAll(".page-link"),r={"#winsper-project-1":document.getElementById("winsper-project-1")?.innerHTML,"#winsper-project-2":document.getElementById("winsper-project-2")?.innerHTML,"#winsper-project-3":document.getElementById("winsper-project-3")?.innerHTML,"#winsper-project-4":document.getElementById("winsper-project-4")?.innerHTML,"#winsper-project-5":document.getElementById("winsper-project-5")?.innerHTML,"#winsper-project-6":document.getElementById("winsper-project-6")?.innerHTML,"#winsper-project-7":document.getElementById("winsper-project-7")?.innerHTML,"#winsper-project-8":document.getElementById("winsper-project-8")?.innerHTML,"#winsper-project-9":document.getElementById("winsper-project-9")?.innerHTML,"#winsper-project-10":document.getElementById("winsper-project-10")?.innerHTML,"#winsper-project-11":document.getElementById("winsper-project-11")?.innerHTML,"#winsper-project-12":document.getElementById("winsper-project-12")?.innerHTML,"#winsper-project-13":document.getElementById("winsper-project-13")?.innerHTML,"#winsper-project-14":document.getElementById("winsper-project-14")?.innerHTML,"#winsper-project-15":document.getElementById("winsper-project-15")?.innerHTML,"#winsper-project-16":document.getElementById("winsper-project-16")?.innerHTML,"#winsper-project-17":document.getElementById("winsper-project-17")?.innerHTML,"#winsper-project-18":document.getElementById("winsper-project-18")?.innerHTML,"#privacy-policy":document.getElementById("privacy-policy-page")?.innerHTML,"#terms-conditions":document.getElementById("terms-conditions-page")?.innerHTML},s=n=>{if(r[n])e.style.display="none",t.innerHTML=r[n],t.style.display="block",window.scrollTo(0,0),"#winsper-project-1"===n&&initializeBeforeAfterSlider();else{e.style.display="block",t.innerHTML="",t.style.display="none";const i=n?n.substring(1):"home",o=document.getElementById(i);o&&window.scrollTo({top:o.offsetTop-100,behavior:"smooth"})}};o.forEach((e=>{e.addEventListener("click",(t=>{const i=e.getAttribute("href");r[i]&&(t.preventDefault(),history.pushState(null,"",i),s(i)),n&&!n.classList.contains("hidden")&&(r[i]||n.classList.add("hidden"))}))})),i&&i.addEventListener("click",(e=>{e.stopPropagation(),n.classList.toggle("hidden")})),document.addEventListener("click",(e=>{!n||n.classList.contains("hidden")||n.contains(e.target)||i.contains(e.target)||n.classList.add("hidden")})),window.addEventListener("popstate",(()=>{s(window.location.hash||"#home")})),s(window.location.hash||"#home");const c=document.getElementById("cursor-light");c&&document.addEventListener("mousemove",(e=>{requestAnimationFrame((()=>{c.style.transform=`translate(${e.clientX}px, ${e.clientY}px)`}))}));const d=document.querySelectorAll(".reveal"),a=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&e.target.classList.add("active")}))}),{threshold:.1});d.forEach((e=>a.observe(e)));const l=document.getElementById("back-to-top");window.addEventListener("scroll",(()=>{window.scrollY>300?l&&l.classList.add("visible"):l&&l.classList.remove("visible")}));const p=document.getElementById("moon-video-background"),m=document.getElementById("services-container");if(p&&m){new IntersectionObserver((e=>{e.forEach((async e=>{try{e.isIntersecting?await p.play():p.pause()}catch(e){"AbortError"!==e.name&&console.error("Video playback error:",e)}}))}),{threshold:.1}).observe(m)}const g=document.querySelectorAll("#portfolio-filters .filter-btn"),u=document.querySelectorAll(".portfolio-card");g.length>0&&u.length>0&&g.forEach((e=>{e.addEventListener("click",(()=>{g.forEach((e=>e.classList.remove("active"))),e.classList.add("active");const t=e.dataset.filter;u.forEach((e=>{"all"===t||e.dataset.category===t?e.style.display="block":e.style.display="none"}))}))})),u.forEach((e=>{e.addEventListener("mousemove",(t=>{const n=e.getBoundingClientRect(),i=t.clientX-n.left,o=t.clientY-n.top,r=(i-n.width/2)/n.width*-1*15,s=(o-n.height/2)/n.height*15;e.style.transform=`perspective(1000px) rotateX(${s}deg) rotateY(${r}deg)`})),e.addEventListener("mouseleave",(()=>{e.style.transform="perspective(1000px) rotateX(0) rotateY(0)"}))})),u.forEach((e=>{e.addEventListener("click",(t=>{if(t.target.closest(".button"))return;const n=e.querySelector(".page-link");n&&n.click()}))}));const y=document.getElementById("trail-canvas");if(y){const E=y.getContext("2d");let f=!1;const L={x:.5*window.innerWidth,y:.5*window.innerHeight},v={pointsNumber:20,widthFactor:.3,mouseThreshold:.6,spring:.4,friction:.5},I=new Array(v.pointsNumber);for(let B=0;B<v.pointsNumber;B++)I[B]={x:L.x,y:L.y,dx:0,dy:0};function w(e,t){L.x=e,L.y=t}function h(){y.width=window.innerWidth,y.height=window.innerHeight}window.addEventListener("click",(e=>{w(e.pageX,e.pageY)})),window.addEventListener("mousemove",(e=>{f=!0,w(e.pageX,e.pageY)})),window.addEventListener("touchmove",(e=>{f=!0,w(e.targetTouches[0].pageX,e.targetTouches[0].pageY)})),h(),function e(t){f||(L.x=(.5+.3*Math.cos(.002*t)*Math.sin(.005*t))*window.innerWidth,L.y=(.5+.2*Math.cos(.005*t)+.1*Math.cos(.01*t))*window.innerHeight),E.clearRect(0,0,y.width,y.height),I.forEach(((e,t)=>{const n=0===t?L:I[t-1],i=0===t?.4*v.spring:v.spring;e.dx+=(n.x-e.x)*i,e.dy+=(n.y-e.y)*i,e.dx*=v.friction,e.dy*=v.friction,e.x+=e.dx,e.y+=e.dy})),E.strokeStyle="white",E.lineCap="round",E.beginPath(),E.moveTo(I[0].x,I[0].y);for(let e=1;e<I.length-1;e++){const t=.5*(I[e].x+I[e+1].x),n=.5*(I[e].y+I[e+1].y);E.quadraticCurveTo(I[e].x,I[e].y,t,n),E.lineWidth=v.widthFactor*(v.pointsNumber-e),E.stroke()}E.lineTo(I[I.length-1].x,I[I.length-1].y),E.stroke(),window.requestAnimationFrame(e)}(0),window.addEventListener("resize",h)}}));
